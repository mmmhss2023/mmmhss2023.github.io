{"title":"求求你写下类型注解吧！","uid":"64646b629a76ebd5c925d6a25f5783c0","slug":"求求你写下类型注解吧！","date":"2023-12-29T15:20:53.000Z","updated":"2023-12-31T03:25:08.084Z","comments":true,"path":"api/articles/求求你写下类型注解吧！.json","keywords":"萌萌梦幻神兽","cover":"../images/python-logo@2x.png","content":"<h1 id=\"求求你写下类型注解吧！\"><a href=\"#求求你写下类型注解吧！\" class=\"headerlink\" title=\"求求你写下类型注解吧！\"></a>求求你写下类型注解吧！</h1><p><img src=\"/../images/PythonTyping1.png\"><br><img src=\"/../images/PythonTyping2.png\"></p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C37455; font-weight: bold\">def</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">triangleArea</span><span style=\"color: #72B7C0\">(</span><span style=\"color: #D3B692; font-weight: bold\">base</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #D3B692; font-weight: bold\">height</span><span style=\"color: #72B7C0\">)</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">return</span><span style=\"color: #D3B692\"> base </span><span style=\"color: #C88DA2; font-weight: bold\">*</span><span style=\"color: #D3B692\"> height </span><span style=\"color: #C88DA2; font-weight: bold\">/</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">2</span></span>\n<span class=\"line\"><span style=\"color: #C37455; font-weight: bold\">def</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">triangleArea_plus</span><span style=\"color: #72B7C0\">(</span><span style=\"color: #D3B692; font-weight: bold\">base</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">float</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #D3B692; font-weight: bold\">height</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">float</span><span style=\"color: #72B7C0\">)</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3; font-weight: bold\">-&gt;</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">float</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">return</span><span style=\"color: #D3B692\"> base </span><span style=\"color: #C88DA2; font-weight: bold\">*</span><span style=\"color: #D3B692\"> height </span><span style=\"color: #C88DA2; font-weight: bold\">/</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">2</span></span>\n<span class=\"line\"><span style=\"color: #72B7C0\">print</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #3F848D\">triangleArea</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #7068B1\">3</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">4</span><span style=\"color: #C5CDD3\">)</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span></span>\n<span class=\"line\"><span style=\"color: #3F848D\">triangleArea_plus</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #7068B1\">3</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">4</span><span style=\"color: #C5CDD3\">)</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span></span>\n<span class=\"line\"><span style=\"color: #D3B692; font-weight: bold\">sep</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #72C09F\">&#39;</span><span style=\"color: #5998C0\">\\n</span><span style=\"color: #72C09F\">&#39;</span><span style=\"color: #C5CDD3\">)</span></span></code></pre></div><span id=\"more\"></span>\n<p>现在很多初学者都不喜欢写类型注解了，要么觉得多余，要么机构没教，要么懒得写。<br>但是，<strong>类型注解</strong>真的很重要！<br>就例如开头的这段代码，以下是它的输出。  </p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7068B1\">6.0</span></span>\n<span class=\"line\"><span style=\"color: #7068B1\">6.0</span></span></code></pre></div><p>既然两个函数输出一致，为什么第二个函数要写类型注解，还增加了代码量？以下是类型注解的几个好处。  </p>\n<h2 id=\"1-遵守Python之禅：显式优于隐式\"><a href=\"#1-遵守Python之禅：显式优于隐式\" class=\"headerlink\" title=\"1,遵守Python之禅：显式优于隐式\"></a>1,遵守Python之禅：显式优于隐式</h2><p>Python是动态类型的语言，你不写类型注解，没人知道你的函数参数和返回值类型都应该是什么。<br>就例如这样：</p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C37455; font-weight: bold\">def</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">calculateArea</span><span style=\"color: #72B7C0\">(</span><span style=\"color: #D3B692; font-weight: bold\">a</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #D3B692; font-weight: bold\">b</span><span style=\"color: #72B7C0\">)</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">return</span><span style=\"color: #D3B692\"> </span><span style=\"color: #5998C0\">int</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">a </span><span style=\"color: #C88DA2; font-weight: bold\">*</span><span style=\"color: #D3B692\"> b</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">area </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">calculateArea</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #7068B1\">3</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">4.003</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #72B7C0\">print</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">area </span><span style=\"color: #C88DA2; font-weight: bold\">==</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">12.009</span><span style=\"color: #C5CDD3\">)</span></span></code></pre></div><div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7068B1\">False</span></span></code></pre></div><p>预期的结果与实际结果不一样，这是必然的，因为编码者不知道<code>calculateArea</code>的返回值是<code>int</code>类型。<br>但是带上类型注解，就可以避免这样的问题。  </p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C37455; font-weight: bold\">def</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">calculateArea</span><span style=\"color: #72B7C0\">(</span><span style=\"color: #D3B692; font-weight: bold\">a</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">int</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">|</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">float</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #D3B692; font-weight: bold\">b</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">int</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">|</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">float</span><span style=\"color: #72B7C0\">)</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3; font-weight: bold\">-&gt;</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">int</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">return</span><span style=\"color: #D3B692\"> </span><span style=\"color: #5998C0\">int</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">a </span><span style=\"color: #C88DA2; font-weight: bold\">*</span><span style=\"color: #D3B692\"> b</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">area </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">calculateArea</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #7068B1\">3</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">4.003</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #72B7C0\">print</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">area </span><span style=\"color: #C88DA2; font-weight: bold\">==</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">12</span><span style=\"color: #C5CDD3\">)</span></span></code></pre></div><div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7068B1\">True</span></span></code></pre></div><h2 id=\"2-帮助编码\"><a href=\"#2-帮助编码\" class=\"headerlink\" title=\"2,帮助编码\"></a>2,帮助编码</h2><p>只要你使用的是任意主流的IDE，例如<strong>VsCode</strong>, <strong>PyCharm</strong>,在你编码时，这些IDE都会根据这个函数的类型注解提醒你参数和返回值的类型。<br><img src=\"/../images/PythonTyping3.png\"><br>这将极大程度地帮助你快速编码并正确使用现成的函数。<br>有些情况下，IDE还会根据类型注解提示你某些类型和另一些类型之间的错误，例如<code>str</code>类型的数据不可以被<code>int</code>函数接收。  </p>\n<h2 id=\"3-自定义化你的代码\"><a href=\"#3-自定义化你的代码\" class=\"headerlink\" title=\"3,自定义化你的代码\"></a>3,自定义化你的代码</h2><p>Python3.12版本中新增了<code>type</code>软关键字，这可以使你定义类型别名。<br>例如你想要让函数接收一个int或str类型的数据，可以这么做：</p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BE856F; font-style: italic\">type</span><span style=\"color: #D3B692\"> IntOrStr </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">int</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">|</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">str</span></span>\n<span class=\"line\"><span style=\"color: #C37455; font-weight: bold\">def</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">function</span><span style=\"color: #72B7C0\">(</span><span style=\"color: #D3B692; font-weight: bold\">p</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> IntOrStr</span><span style=\"color: #72B7C0\">)</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3; font-weight: bold\">-&gt;</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">bool</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">if</span><span style=\"color: #D3B692\"> </span><span style=\"color: #5998C0\">type</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">p</span><span style=\"color: #C5CDD3\">)</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">in</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3\">[</span><span style=\"color: #BE856F; font-style: italic\">int</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">str</span><span style=\"color: #C5CDD3\">]</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">        </span><span style=\"color: #C88DA2; font-weight: bold\">return</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">True</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">else</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">        </span><span style=\"color: #C88DA2; font-weight: bold\">return</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">False</span></span>\n<span class=\"line\"><span style=\"color: #72B7C0\">print</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #3F848D\">function</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&#39;test&#39;</span><span style=\"color: #C5CDD3\">))</span></span>\n<span class=\"line\"><span style=\"color: #72B7C0\">print</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #3F848D\">function</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #7068B1\">123</span><span style=\"color: #C5CDD3\">))</span></span></code></pre></div><div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #7068B1\">True</span></span>\n<span class=\"line\"><span style=\"color: #7068B1\">True</span></span></code></pre></div><p>现在再看看开头的两张图片，是不是感觉。。。一言难尽了？<br>大家多写写类型注解吧！</p>\n","feature":true,"text":"求求你写下类型注解吧！ pythondef triangleArea(base, height): return base * height / 2 def t...","permalink":"/post/求求你写下类型注解吧！","photos":[],"count_time":{"symbolsCount":"1.3k","symbolsTime":"1 mins."},"categories":[{"name":"开发","slug":"开发","count":1,"path":"api/categories/开发.json"}],"tags":[{"name":"编程","slug":"编程","count":2,"path":"api/tags/编程.json"},{"name":"Python","slug":"Python","count":2,"path":"api/tags/Python.json"},{"name":"技巧","slug":"技巧","count":1,"path":"api/tags/技巧.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%B1%82%E6%B1%82%E4%BD%A0%E5%86%99%E4%B8%8B%E7%B1%BB%E5%9E%8B%E6%B3%A8%E8%A7%A3%E5%90%A7%EF%BC%81\"><span class=\"toc-text\">求求你写下类型注解吧！</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E9%81%B5%E5%AE%88Python%E4%B9%8B%E7%A6%85%EF%BC%9A%E6%98%BE%E5%BC%8F%E4%BC%98%E4%BA%8E%E9%9A%90%E5%BC%8F\"><span class=\"toc-text\">1,遵守Python之禅：显式优于隐式</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-%E5%B8%AE%E5%8A%A9%E7%BC%96%E7%A0%81\"><span class=\"toc-text\">2,帮助编码</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8C%96%E4%BD%A0%E7%9A%84%E4%BB%A3%E7%A0%81\"><span class=\"toc-text\">3,自定义化你的代码</span></a></li></ol></li></ol>","author":{"name":"萌萌梦幻神兽","slug":"blog-author","avatar":"https://pic.imgdb.cn/item/658d8f8cc458853aef2010ff.jpg","link":"/","description":"一寸光阴一寸金,寸金难买寸光阴","socials":{"github":"https://github.com/mmmhss2023","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/meng-meng-meng-huan-shen-shou","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/289282595"}}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"介绍强大的小图灵API框架","uid":"bf24fda0c1683a7bb4ae077a3e27fa4e","slug":"介绍强大的小图灵API框架","date":"2023-12-28T15:54:09.000Z","updated":"2023-12-31T03:22:39.141Z","comments":true,"path":"api/articles/介绍强大的小图灵API框架.json","keywords":"萌萌梦幻神兽","cover":"https://xbzstudio.github.io/icodeapi/docs/icodeapi.svg","text":"小图灵一直没有一个能用的API框架,于是我们工作室自己动手制作了一个强大而又快捷的API框架.运行在Python之中,需要3.10等高版本支持.以下是一个示例:...","permalink":"/post/介绍强大的小图灵API框架","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"开源项目","slug":"开源项目","count":1,"path":"api/categories/开源项目.json"}],"tags":[{"name":"编程","slug":"编程","count":2,"path":"api/tags/编程.json"},{"name":"Python","slug":"Python","count":2,"path":"api/tags/Python.json"},{"name":"web开发","slug":"web开发","count":1,"path":"api/tags/web开发.json"}],"author":{"name":"萌萌梦幻神兽","slug":"blog-author","avatar":"https://pic.imgdb.cn/item/658d8f8cc458853aef2010ff.jpg","link":"/","description":"一寸光阴一寸金,寸金难买寸光阴","socials":{"github":"https://github.com/mmmhss2023","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/meng-meng-meng-huan-shen-shou","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/289282595"}}}},"feature":true}}