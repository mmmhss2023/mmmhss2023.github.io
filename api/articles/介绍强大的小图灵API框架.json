{"title":"介绍强大的小图灵API框架","uid":"bf24fda0c1683a7bb4ae077a3e27fa4e","slug":"介绍强大的小图灵API框架","date":"2023-12-28T15:54:09.000Z","updated":"2023-12-28T16:07:38.599Z","comments":true,"path":"api/articles/介绍强大的小图灵API框架.json","keywords":"萌萌梦幻神兽","cover":"https://xbzstudio.github.io/icodeapi/docs/icodeapi.svg","content":"<p>小图灵一直没有一个能用的API框架,于是我们工作室自己动手制作了一个强大而又快捷的API框架.<br>运行在Python之中,需要3.10等高版本支持.<br>以下是一个示例:  </p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">from</span><span style=\"color: #D3B692\"> icodeapi </span><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> IcodeAPI</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">cookie </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #72B7C0\">input</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&#39;Enter your cookie: &#39;</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">api </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">IcodeAPI</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692; font-weight: bold\">cookie</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> cookie</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">api</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">updateIntro</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&#39;Update by icodeapi&#39;</span><span style=\"color: #C5CDD3\">)</span></span></code></pre></div><p><a href=\"https://pypi.org/project/icodeapi/\">PyPI</a> <a href=\"https://github.com/xbzstudio/icodeapi\">Github</a>  <a href=\"https://xbzstudio.github.io/icodeapi/docs\">文档</a>  </p>\n<span id=\"more\"></span>\n<p>小图灵一直没有一个能用的API框架,于是我们工作室自己动手制作了一个强大而又快捷的API框架.<br>运行在Python之中,需要3.10等高版本支持.<br>以下是一个示例:  </p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">from</span><span style=\"color: #D3B692\"> icodeapi </span><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> IcodeAPI</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">cookie </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #72B7C0\">input</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&#39;Enter your cookie: &#39;</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">api </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">IcodeAPI</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692; font-weight: bold\">cookie</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> cookie</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">api</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">updateIntro</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&#39;Update by icodeapi&#39;</span><span style=\"color: #C5CDD3\">)</span></span></code></pre></div><p><a href=\"https://pypi.org/project/icodeapi/\">PyPI</a> <a href=\"https://github.com/xbzstudio/icodeapi\">Github</a> <a href=\"https://xbzstudio.github.io/icodeapi/docs\">文档</a>  </p>\n<h2 id=\"这个强大的API框架可以帮助你构建响应式机器人\"><a href=\"#这个强大的API框架可以帮助你构建响应式机器人\" class=\"headerlink\" title=\"这个强大的API框架可以帮助你构建响应式机器人\"></a>这个强大的API框架可以帮助你构建响应式机器人</h2><p>使用它强大的server模块以轻易地构建服务器.<br>这是它在官网放出的示例.  </p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> icodeapi</span></span>\n<span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">from</span><span style=\"color: #D3B692\"> icodeapi </span><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> server</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">cookie </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #72B7C0\">input</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&quot;Enter cookie: &quot;</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">api </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> icodeapi</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">AsyncIcodeAPI</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692; font-weight: bold\">cookie</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> cookie</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">Server </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> server</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">IcodeServer</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692; font-weight: bold\">api</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> api</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #3F848D\">@Server</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">CheckMessage</span><span style=\"color: #C5CDD3\">()</span></span>\n<span class=\"line\"><span style=\"color: #C37455\">async</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C37455; font-weight: bold\">def</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">AutoReply</span><span style=\"color: #72B7C0\">(</span><span style=\"color: #D3B692; font-weight: bold\">userId</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #D3B692; font-weight: bold\">bot</span><span style=\"color: #72B7C0\">)</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">try</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">        </span><span style=\"color: #C88DA2; font-weight: bold\">await</span><span style=\"color: #D3B692\"> bot</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">fastReply</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">userId</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #72C09F\">&#39;Hello world!&#39;</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">except</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C37455\">AssertionError</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">        </span><span style=\"color: #C88DA2; font-weight: bold\">pass</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">server</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">RunServer</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">Server</span><span style=\"color: #C5CDD3\">)</span></span></code></pre></div><p>仅仅几行代码就可以实现自动回复, 监测评论下回复等复杂功能!  </p>\n<h2 id=\"内有封装各种实用工具\"><a href=\"#内有封装各种实用工具\" class=\"headerlink\" title=\"内有封装各种实用工具\"></a>内有封装各种实用工具</h2><p>你甚至可以在评论区唱歌.  </p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">from</span><span style=\"color: #D3B692\"> icodeapi </span><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">*</span></span>\n<span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">from</span><span style=\"color: #D3B692\"> icodeapi</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #D3B692\">tools </span><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">*</span></span>\n<span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> time</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">user </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">IcodeAPI</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72B7C0\">input</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&#39;Cookie: &#39;</span><span style=\"color: #C5CDD3\">))</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">times </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #5998C0\">int</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72B7C0\">input</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&#39;Sing times: &#39;</span><span style=\"color: #C5CDD3\">))</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">num </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">0</span></span>\n<span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">while</span><span style=\"color: #D3B692\"> num </span><span style=\"color: #C88DA2; font-weight: bold\">&lt;</span><span style=\"color: #D3B692\"> times</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">for</span><span style=\"color: #D3B692\"> i </span><span style=\"color: #C88DA2; font-weight: bold\">in</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">SingSong</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&#39;a1f09b5eb34a48dfbdc8dee59d130ec6&#39;</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">        </span><span style=\"color: #72C09F\">&quot;&quot;&quot;You say that we will always be,</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        without you I fell lost at see.</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        Through the darkness you&#39;d hide with me,</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        like a wind we&#39;d be wild and free.</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        You~~~</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        said you follow me anywhere.</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        But your e ~ yes,</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        tell me you won&#39;t be there.</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        I&#39;ve gotta learn how to love without you!</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        I&#39;ve gotta carry me cross without you~</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        Stuck in the riddle and I&#39;m just about to-----</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        figure out without you!</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        And I&#39;m done sitting home without you!</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        Fuck I&#39;m going out without you!</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        I&#39;m going to tear this city without you,</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        I&#39;m going Bonnie and Clyde without you~~~</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        deng deng, deng deng deng, deng deng deng deng deng deng, deng deng deng~</span></span>\n<span class=\"line\"><span style=\"color: #72C09F\">        deng deng, deng deng deng, deng deng deng deng deng deng deng deng deng deng~~~~&quot;&quot;&quot;</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">        user</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C5CDD3\">)</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">        </span><span style=\"color: #C88DA2; font-weight: bold\">if</span><span style=\"color: #D3B692\"> i </span><span style=\"color: #C88DA2; font-weight: bold\">==</span><span style=\"color: #D3B692\"> </span><span style=\"color: #72C09F\">&#39;Finish one time&#39;</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">            num </span><span style=\"color: #C88DA2; font-weight: bold\">+=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">1</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">        time</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">sleep</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #7068B1\">5.1</span><span style=\"color: #C5CDD3\">)</span></span></code></pre></div><h2 id=\"完美地支持同步与异步\"><a href=\"#完美地支持同步与异步\" class=\"headerlink\" title=\"完美地支持同步与异步\"></a>完美地支持同步与异步</h2><p>你可以使用fastapi结合icodeapi提供的异步方法来构建服务器.  </p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki Noctis Minimus\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">from</span><span style=\"color: #D3B692\"> fastapi </span><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> FastAPI</span></span>\n<span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">from</span><span style=\"color: #D3B692\"> fastapi</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #D3B692\">responses </span><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> JSONResponse</span></span>\n<span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">from</span><span style=\"color: #D3B692\"> fastapi</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #D3B692\">middleware</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #D3B692\">cors </span><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> CORSMiddleware</span></span>\n<span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">from</span><span style=\"color: #D3B692\"> icodeapi </span><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> AsyncIcodeAPI</span></span>\n<span class=\"line\"><span style=\"color: #C88DA2; font-weight: bold\">import</span><span style=\"color: #D3B692\"> uvicorn</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">app </span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> FastAPI </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">FastAPI</span><span style=\"color: #C5CDD3\">()</span><span style=\"color: #D3B692\"> </span><span style=\"color: #5E7887; font-style: italic\"># 创建fastapi实例</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">app</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">add_middleware</span><span style=\"color: #C5CDD3\">(</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    CORSMiddleware</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #D3B692; font-weight: bold\">allow_origins</span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #C5CDD3\">[</span><span style=\"color: #72C09F\">&#39;*&#39;</span><span style=\"color: #C5CDD3\">]</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #D3B692; font-weight: bold\">allow_credentials</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">True</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #D3B692; font-weight: bold\">allow_methods</span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #C5CDD3\">[</span><span style=\"color: #72C09F\">&#39;*&#39;</span><span style=\"color: #C5CDD3\">]</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #D3B692; font-weight: bold\">allow_headers</span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #C5CDD3\">[</span><span style=\"color: #72C09F\">&#39;*&#39;</span><span style=\"color: #C5CDD3\">]</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span></span>\n<span class=\"line\"><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">api </span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> AsyncIcodeAPI </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">AsyncIcodeAPI</span><span style=\"color: #C5CDD3\">()</span><span style=\"color: #D3B692\"> </span><span style=\"color: #5E7887; font-style: italic\"># 实例化AsyncIcodeAPI</span></span>\n<span class=\"line\"><span style=\"color: #3F848D\">@app</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">get</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&quot;/&quot;</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #C37455\">async</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C37455; font-weight: bold\">def</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">getWork</span><span style=\"color: #72B7C0\">()</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3; font-weight: bold\">-&gt;</span><span style=\"color: #D3B692\"> JSONResponse</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> </span><span style=\"color: #5E7887; font-style: italic\"># 返回作品集</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    results </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">await</span><span style=\"color: #D3B692\"> api</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">getWorks</span><span style=\"color: #C5CDD3\">()</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">return</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">JSONResponse</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">results</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #3F848D\">@app</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">get</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&quot;/</span><span style=\"color: #A88C00\">&#123;workId&#125;</span><span style=\"color: #72C09F\">&quot;</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #C37455\">async</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C37455; font-weight: bold\">def</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">getWorkById</span><span style=\"color: #72B7C0\">(</span><span style=\"color: #D3B692; font-weight: bold\">workId</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">str</span><span style=\"color: #72B7C0\">)</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3; font-weight: bold\">-&gt;</span><span style=\"color: #D3B692\"> JSONResponse</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> </span><span style=\"color: #5E7887; font-style: italic\"># 返回作品信息</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    results </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">await</span><span style=\"color: #D3B692\"> api</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">getWorkDetail</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">workId</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">return</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">JSONResponse</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">results</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #3F848D\">@app</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">get</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #72C09F\">&quot;/person/</span><span style=\"color: #A88C00\">&#123;userId&#125;</span><span style=\"color: #72C09F\">&quot;</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #C37455\">async</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C37455; font-weight: bold\">def</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">getPerson</span><span style=\"color: #72B7C0\">(</span><span style=\"color: #D3B692; font-weight: bold\">userId</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> </span><span style=\"color: #BE856F; font-style: italic\">str</span><span style=\"color: #72B7C0\">)</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C5CDD3; font-weight: bold\">-&gt;</span><span style=\"color: #D3B692\"> JSONResponse</span><span style=\"color: #C5CDD3; font-weight: bold\">:</span><span style=\"color: #D3B692\"> </span><span style=\"color: #5E7887; font-style: italic\"># 返回个人信息</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    results </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">await</span><span style=\"color: #D3B692\"> api</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">getPersonInfo</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">userId</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">    </span><span style=\"color: #C88DA2; font-weight: bold\">return</span><span style=\"color: #D3B692\"> </span><span style=\"color: #3F848D\">JSONResponse</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">results</span><span style=\"color: #C5CDD3\">)</span></span>\n<span class=\"line\"><span style=\"color: #D3B692\">uvicorn</span><span style=\"color: #C5CDD3; font-weight: bold\">.</span><span style=\"color: #3F848D\">run</span><span style=\"color: #C5CDD3\">(</span><span style=\"color: #D3B692\">app</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #D3B692; font-weight: bold\">host</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #72C09F\">&quot;0.0.0.0&quot;</span><span style=\"color: #C5CDD3; font-weight: bold\">,</span><span style=\"color: #D3B692\"> </span><span style=\"color: #D3B692; font-weight: bold\">port</span><span style=\"color: #D3B692\"> </span><span style=\"color: #C88DA2; font-weight: bold\">=</span><span style=\"color: #D3B692\"> </span><span style=\"color: #7068B1\">80</span><span style=\"color: #C5CDD3\">)</span></span></code></pre></div><h2 id=\"项目还在持续更新-目前正在编写1-4版本-希望各位多多支持\"><a href=\"#项目还在持续更新-目前正在编写1-4版本-希望各位多多支持\" class=\"headerlink\" title=\"项目还在持续更新,目前正在编写1.4版本,希望各位多多支持.\"></a>项目还在持续更新,目前正在编写1.4版本,希望各位多多支持.</h2>","text":"小图灵一直没有一个能用的API框架,于是我们工作室自己动手制作了一个强大而又快捷的API框架.运行在Python之中,需要3.10等高版本支持.以下是一个示例:...","permalink":"/post/介绍强大的小图灵API框架","photos":[],"count_time":{"symbolsCount":"3.4k","symbolsTime":"3 mins."},"categories":[{"name":"开源项目","slug":"开源项目","count":1,"path":"api/categories/开源项目.json"}],"tags":[{"name":"Python","slug":"Python","count":1,"path":"api/tags/Python.json"},{"name":"编程","slug":"编程","count":1,"path":"api/tags/编程.json"},{"name":"web开发","slug":"web开发","count":1,"path":"api/tags/web开发.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%BF%99%E4%B8%AA%E5%BC%BA%E5%A4%A7%E7%9A%84API%E6%A1%86%E6%9E%B6%E5%8F%AF%E4%BB%A5%E5%B8%AE%E5%8A%A9%E4%BD%A0%E6%9E%84%E5%BB%BA%E5%93%8D%E5%BA%94%E5%BC%8F%E6%9C%BA%E5%99%A8%E4%BA%BA\"><span class=\"toc-text\">这个强大的API框架可以帮助你构建响应式机器人</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%86%85%E6%9C%89%E5%B0%81%E8%A3%85%E5%90%84%E7%A7%8D%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7\"><span class=\"toc-text\">内有封装各种实用工具</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%8C%E7%BE%8E%E5%9C%B0%E6%94%AF%E6%8C%81%E5%90%8C%E6%AD%A5%E4%B8%8E%E5%BC%82%E6%AD%A5\"><span class=\"toc-text\">完美地支持同步与异步</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E8%BF%98%E5%9C%A8%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0-%E7%9B%AE%E5%89%8D%E6%AD%A3%E5%9C%A8%E7%BC%96%E5%86%991-4%E7%89%88%E6%9C%AC-%E5%B8%8C%E6%9C%9B%E5%90%84%E4%BD%8D%E5%A4%9A%E5%A4%9A%E6%94%AF%E6%8C%81\"><span class=\"toc-text\">项目还在持续更新,目前正在编写1.4版本,希望各位多多支持.</span></a></li></ol>","author":{"name":"萌萌梦幻神兽","slug":"blog-author","avatar":"https://pic.imgdb.cn/item/658d8f8cc458853aef2010ff.jpg","link":"/","description":"一寸光阴一寸金,寸金难买寸光阴","socials":{"github":"https://github.com/mmmhss2023","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/meng-meng-meng-huan-shen-shou","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/289282595"}}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"我喜欢你","uid":"5ed29085da5924797d4a7973a20f2808","slug":"我喜欢你","date":"2023-12-28T15:35:07.000Z","updated":"2023-12-28T16:09:14.689Z","comments":true,"path":"api/articles/我喜欢你.json","keywords":"萌萌梦幻神兽","cover":"https://pic.imgdb.cn/item/658d8f8cc458853aef2010ff.jpg","text":"最喜欢你们了! 关于我喜欢的人御坂美琴 加藤惠 夏娜 栉枝实乃梨 雪之下雪乃 莎莉娜 小野寺小咲 阿尔托莉雅 潘德拉贡 佩可莉姆 五更琉璃 砂狼白子 飞鸟马时 ...","permalink":"/post/我喜欢你","photos":[],"count_time":{"symbolsCount":132,"symbolsTime":"1 mins."},"categories":[{"name":"关于","slug":"关于","count":1,"path":"api/categories/关于.json"}],"tags":[{"name":"后宫","slug":"后宫","count":1,"path":"api/tags/后宫.json"}],"author":{"name":"萌萌梦幻神兽","slug":"blog-author","avatar":"https://pic.imgdb.cn/item/658d8f8cc458853aef2010ff.jpg","link":"/","description":"一寸光阴一寸金,寸金难买寸光阴","socials":{"github":"https://github.com/mmmhss2023","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"https://www.zhihu.com/people/meng-meng-meng-huan-shen-shou","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/svg/bilibili.svg","link":"https://space.bilibili.com/289282595"}}}}}}